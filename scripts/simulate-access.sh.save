

#!/bin/bash

echo "===== Testing SME user access ====="
aws s3 ls s3://sme-logs-bucket
aws s3 cp testfile.txt s3://sme-logs-bucket/ # should fail

echo "===== Assuming DeveloperTemporaryRole ====="
CREDENTIALS=$(aws sts assume-role \
    --role-arn arn:aws:iam::YOUR_ACCOUNT_ID:role/DeveloperTemporaryRole \
    --role-session-name DevSession)

export AWS_ACCESS_KEY_ID=$(echo $CREDENTIALS | jq -r '.Credentials.AccessKeyId')
export AWS_SECRET_ACCESS_KEY=$(echo $CREDENTIALS | jq -r '.Credentials.SecretAccessKey')
export AWS_SESSION_TOKEN=$(echo $CREDENTIALS | jq -r '.Credentials.SessionToken')

echo "===== Testing Developer access ====="
aws s3 mb s3://developer-demo-bucket-2
aws s3 ls s3://developer-demo-bucket
aws s3 ls s3://sme-logs-bucket # should fail




